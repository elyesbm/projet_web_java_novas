{% extends 'front/base_user.html.twig' %}

{% block title %}Configurer l'authentification à deux facteurs - NoVas{% endblock %}

{% block body %}
<div class="min-h-screen bg-gradient-to-br from-background to-secondary">
    <div class="container mx-auto px-4 py-12">
        <div class="max-w-2xl mx-auto">
            <!-- Header avec alerte obligatoire -->
            <div class="mb-8">
                <div class="bg-red-500/20 border border-red-500/50 rounded-lg p-6 mb-6">
                    <div class="flex gap-4">
                        <i data-lucide="alert-circle" class="w-6 h-6 text-red-400 flex-shrink-0"></i>
                        <div>
                            <h2 class="text-lg font-semibold text-red-400 mb-2">Configuration obligatoire</h2>
                            <p class="text-red-200">
                                L'authentification à deux facteurs est <strong>obligatoire</strong> pour accéder aux fonctionnalités du site. 
                                Vous ne pouvez pas continuer sans l'activer.
                            </p>
                        </div>
                    </div>
                </div>

                <h1 class="text-3xl font-bold mb-2">Authentification à Deux Facteurs</h1>
                <p class="text-muted-foreground">Renforcez la sécurité de votre compte (étape obligatoire)</p>
            </div>

            <!-- Info Card -->
            <div class="bg-primary/10 border border-primary/20 rounded-lg p-6 mb-8">
                <div class="flex gap-4">
                    <div class="flex-shrink-0">
                        <i data-lucide="shield-check" class="w-6 h-6 text-primary"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold text-foreground mb-2">Qu'est-ce que la 2FA?</h3>
                        <p class="text-sm text-muted-foreground mb-4">
                            L'authentification à deux facteurs ajoute une couche supplémentaire de sécurité à votre compte. 
                            En plus de votre mot de passe, vous devrez entrer un code à usage unique généré par une application 
                            comme Google Authenticator ou Authy.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Steps -->
            <div class="bg-card border border-white/10 rounded-lg p-8 mb-8">
                <div class="space-y-6">
                    <div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm">1</div>
                            <h3 class="font-semibold">Télécharger une application d'authentification</h3>
                        </div>
                        <p class="text-sm text-muted-foreground pl-12">
                            Installez Google Authenticator, Microsoft Authenticator, Authy ou une autre application compatible.
                        </p>
                    </div>

                    <div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm">2</div>
                            <h3 class="font-semibold">Cliquez sur le bouton ci-dessous</h3>
                        </div>
                        <p class="text-sm text-muted-foreground pl-12">
                            Vous verrez un code QR à scanner avec votre application d'authentification.
                        </p>
                    </div>

                    <div>
                        <div class="flex items-center gap-4 mb-3">
                            <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center font-bold text-sm">3</div>
                            <h3 class="font-semibold">Confirmez votre code</h3>
                        </div>
                        <p class="text-sm text-muted-foreground pl-12">
                            Entrez le code à 6 chiffres généré par l'application pour confirmer.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Setup Button -->
            <form method="POST" class="flex gap-4">
                <button type="submit" class="flex-1 h-12 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-all flex items-center justify-center gap-2 group">
                    <i data-lucide="qr-code" class="w-5 h-5"></i>
                    Configurer maintenant (obligatoire)
                </button>
                <a href="{{ path('app_logout') }}" class="h-12 px-6 bg-secondary border border-white/10 rounded-lg font-medium hover:bg-white/5 transition-colors flex items-center justify-center">
                    Se déconnecter
                </a>
            </form>

            <!-- Warning -->
            <div class="mt-6 p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg">
                <p class="text-sm text-amber-100">
                    <i data-lucide="info" class="w-4 h-4 inline mr-2"></i>
                    <strong>Important:</strong> Vous devez terminer cette configuration pour continuer d'utiliser le site.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

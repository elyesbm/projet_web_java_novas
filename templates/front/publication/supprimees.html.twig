{% extends 'front/base_home.html.twig' %}

{% block title %}Publications supprimées - NoVas{% endblock %}

{% block body %}
<div class="min-h-screen bg-background">
    {% include 'front/partials/_auth_nav.html.twig' %}

    <section class="pt-32 pb-24 px-6 relative overflow-hidden">
        <div class="absolute inset-0 gradient-orb"></div>
        <div class="max-w-4xl mx-auto relative">
            <div class="mb-6">
                <a href="{{ path('app_publications_index') }}" class="inline-flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors text-sm">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                    Retour aux publications
                </a>
            </div>

            <div class="text-center mb-10">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-muted/50 border border-white/10 mb-4">
                    <i data-lucide="trash-2" class="w-8 h-8 text-muted-foreground"></i>
                </div>
                <h1 class="font-serif text-3xl font-medium mb-2">Publications supprimées</h1>
                <p class="text-muted-foreground">Vous pouvez restaurer une publication pour la rendre à nouveau visible.</p>
            </div>

            {% if publications is empty %}
                <div class="glass-card rounded-2xl p-12 text-center">
                    <p class="text-muted-foreground">Aucune publication supprimée.</p>
                    <a href="{{ path('app_publications_index') }}" class="inline-flex items-center gap-2 mt-4 text-primary hover:underline">
                        Voir les publications
                        <i data-lucide="arrow-right" class="w-4 h-4"></i>
                    </a>
                </div>
            {% else %}
                <div class="space-y-4">
                    {% for pub in publications %}
                        <article class="glass-card rounded-2xl p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                            <div class="flex-1 min-w-0">
                                <h2 class="font-serif text-lg font-medium text-foreground truncate">{{ pub.titre }}</h2>
                                <p class="text-sm text-muted-foreground mt-1 line-clamp-2">{{ pub.contenu|striptags|slice(0, 120) }}{% if pub.contenu|striptags|length > 120 %}...{% endif %}</p>
                                <p class="text-xs text-muted-foreground mt-2">Supprimée {{ pub.deletedAt|time_diff }}</p>
                            </div>
                            <form action="{{ path('app_publication_restaurer', { id: pub.id }) }}" method="post" class="flex-shrink-0">
                                <input type="hidden" name="_token" value="{{ csrf_token('restore_publication_' ~ pub.id) }}">
                                <button type="submit" class="flex items-center gap-2 px-4 py-2.5 bg-primary/20 text-primary border border-primary/40 rounded-xl text-sm font-medium hover:bg-primary/30 transition-colors">
                                    <i data-lucide="rotate-ccw" class="w-4 h-4"></i>
                                    Restaurer
                                </button>
                            </form>
                        </article>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </section>
</div>
<script>document.addEventListener('DOMContentLoaded', function() { lucide.createIcons(); });</script>
{% endblock %}
